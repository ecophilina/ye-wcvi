```{r, echo=FALSE, message=FALSE, warning=FALSE}
library(here)
library(knitr)
library(ggplot2)
library(sdmTMB)
here::dr_here()
```


# Introduction {#sec:introduction}

# Methods {#sec:methods}

# Results {#sec:results}

```{r}
i_ye_cda <- readRDS(here("data-generated/yelloweye-spatial-index-cda.rds"))
i_ye_noncda <- readRDS(here("data-generated/yelloweye-spatial-index-3CD-outside-cda.rds"))
i_hal <- readRDS(here("data-generated/halibut-index-all-S.rds"))
i_hal_cda <- readRDS(here("data-generated/halibut-index-cda.rds"))
i_hal_noncda <- readRDS(here("data-generated/halibut-index-3CD-outside-cda.rds"))
i_hal_5A <- readRDS(here("data-generated/halibut-index-5A.rds"))
cda_grid <- readRDS(here("data-generated/cda_grid.rds"))
noncda_grid <- readRDS(here("data-generated/noncda_grid.rds"))
```

```{r r2-func}
r2 <- function(x) {
  sprintf("%.2f", round(x, 2))
}
```


```{r halibut-preds, fig.cap="Caption here", out.width="6in"}
include_graphics(here("figs/halibut-2020-predictions-S.png"))
```

```{r halibut-indexes, fig.cap="Caption here", out.width="6in"}
include_graphics(here("figs/halibut-index-by-area.png"))
```

Proportion of grid inside CDA: `r r2(nrow(cda_grid) / (nrow(cda_grid) + nrow(noncda_grid)))`

```{r filter-hal}
i_hal_cda2020 <- filter(i_hal_cda, year == 2020)
i_hal_noncda2020 <- filter(i_hal_noncda, year == 2020)
```

Proportion of estimated total Halibut caught inside CDA in 2020: 
`r r2(i_hal_cda2020$est / (i_hal_cda2020$est + i_hal_noncda2020$est))`

Average estimated Halibut caught per 100 hooks inside CDA:
`r r2(i_hal_cda2020$est / nrow(cda_grid))`

Average estimated Halibut caught per 100 hooks outside CDA:
`r r2(i_hal_noncda2020$est / nrow(noncda_grid))`

Proportion of estimated YE catch inside CDA:
`r r2(i_ye_cda$est / (i_ye_cda$est + i_ye_noncda$est))`

Average estimated YE caught per 100 hooks inside CDA:
`r r2(i_ye_cda$est / nrow(cda_grid))`

Average estimated YE caught per 100 hooks outside CDA:
`r r2(i_ye_noncda$est / nrow(noncda_grid))`